<html>
	<head>
		<title>BREAKTIME - Preferences</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/pagetemplate.css" />
	</head>
	<body>

		
		<center>
			<div class="container" style="margin-top:500px">
				<div align="justify" style="margin-top:-106px;">

          <h1>PREFERENCES</h1>
          <br>
					{{#each users_arr}}
            {{#if current}}
              You are currently logged in as {{email}}. There is <div id = "countdown_timer" style = "display:inline"><span id = "timeleft" style = "display:inline">{{timerpref}}</span></div> until your next scheduled break.
            {{/if}}
          {{/each}}
 					</br><br>
 					<!--Adjust Selected Activities:
 					<div class="checks">
  					<input type="checkbox" name="activity" value="1">activity 1<br>
  					<input type="checkbox" name="activity" value="2">activity 2<br>
  					<input type="checkbox" name="activity" value="3">activity 3<br>
  					<input type="checkbox" name="activity" value="4">activity 4 <br> 
  					<input type="checkbox" name="activity" value="5">activity 5<br>
  					<input type="checkbox" name="activity" value="6">activity 6 <br> 
 					<input type="checkbox" name="activity" value="7">activity 7<br>
  					<input type="checkbox" name="activity" value="8">activity 8 <br> 
 					<input type="checkbox" name="activity" value="9">activity 9<br>
  					<input type="checkbox" name="activity" value="10">activity 10<br> 
  					</div>
  					</br>-->
 					Work from 
 					<select>
  					<option value="begin work hours">Hour</option>
  					<option value="1">1</option>
  					<option value="2">2 </option>
  					<option value="3">3</option>
 					<option value="4">4</option>
 					<option value="5">5</option>
  					<option value="6">6</option>
 					<option value="7">7</option>
  					<option value="8">8</option>
  					<option value="9">9</option>
  					<option value="10">10</option>
  					<option value="11">11</option>
  					<option value="12">12</option>
 					</select>
           <input type="minBeg" placeholder="Min">
 					<select>
            <option value="BeginAMPM">Period</option>
            <option value="am">am</option>
            <option value="pm">pm</option>
          </select>
 to 
 					<select>
 					<option value="End work hours">Hour</option>
  					<option value="1">1</option>
  					<option value="2">2</option>
  					<option value="3">3</option>
 					<option value="4">4</option>
 					<option value="5">5</option>
					<option value="6">6</option>
 					<option value="7">7</option>
 					<option value="8">8</option>
 					<option value="9">9</option>
  					<option value="10">10</option>
  					<option value="11">11</option>
  					<option value="12">12</option>
 					</select>
          <input type="minEnd" placeholder="min">
 					<select>
  					<option value="EndAMPM">Period</option>
  					<option value="am">am</option>
  					<option value="pm">pm</option>
 					</select>
  					</br>
  					Select A Break Interval: 
 					<select>
  					<option value="interval">Choose interval</option>
  					<option value="1">20 min</option>
  					<option value="2">30 min </option>
  					<option value="3">40 min</option>
 					<option value="4">50 min</option>
 					<option value="5">60 min</option>
 					</select>
 					<br>
 					Select Alarm Type
 					<select>
  					<option value="AlarmType">Choose Alarm</option>
  					<option value="textMessage">Text Message Alert</option>
  					<option value="email">Email Alert</option>
            <option value="vibrate">Vibrate</option>
  					<option value="Alarm">Classic Alarm</option>
 					</select>
 					<br>
 					<br>
 					<a href="home"><input type="submit"></a>
			</div>
			</div>
			<div id = "bottomspace"></div>
		</center>
		<nav class="nav-bar navbar navbar-fixed-bottom">
 		<center>
 			<div><a href="home"><img src = "navicons/home.png" class = "navicon" id = "homelink"></a></div>
      <div><a href="levels"><img src = "navicons/levels.png" class = "navicon" id = "levelslink"></a></div>
      <div><a href="activity"><img src = "navicons/activity.png" class = "navicon" id = "activitylink"></a></div>
      <div><a href="settings"><img src = "navicons/settings.png" class = "navicon" id = "settingslink"></a></div>
      <div><a href="help"><img src = "navicons/help.png" class = "navicon" id = "helplink"></a></div>
      <span class = "stretch"></span>
 		</center>
		</nav>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="js/countdown.js" type="text/javascript"></script>
    <script type = "text/javascript">
      var timepref = $('#countdown_timer span').text();
      var pathname = window.location.href;
      var indexOfTimeRemaining = pathname.indexOf('timeremaining=');
      if(indexOfTimeRemaining == -1)
        timer = new Countdown(timepref);
      else
      {
        var timeRemaining = pathname.substring(indexOfTimeRemaining+14);
        if(timeToSeconds(timeRemaining) > timeToSeconds(timepref))
          timer = new Countdown(timepref);
        else
          timer = new Countdown(timeRemaining);
      }
      timer.init();
      timer.start();

      function timeToSeconds(time)
      {
          if(time == undefined) time = this.start_time;
          time_ary = time.split(":"); 
          var tempHours = parseInt(time_ary[0]);
          var tempMinutes = parseInt(time_ary[1]);
          var tempSeconds = parseInt(time_ary[2]);
          return tempHours * 3600 + tempMinutes * 60 + tempSeconds;
      }
      $('#homelink').click(function(e) {
        e.preventDefault();
        window.location.href = "home?timeremaining=" + timer.getTimeRemaining();
      });
      $('#levelslink').click(function(e) {
        e.preventDefault();
        window.location.href = "levels?timeremaining=" + timer.getTimeRemaining();
      });
      $('#activitylink').click(function(e) {
        e.preventDefault();
        window.location.href = "activity?timeremaining=" + timer.getTimeRemaining();
      });
      $('#settingslink').click(function(e) {
        e.preventDefault();
        window.location.href = "settings?timeremaining=" + timer.getTimeRemaining();
      });
      $('#helplink').click(function(e) {
        e.preventDefault();
        window.location.href = "help?timeremaining=" + timer.getTimeRemaining();
      });
    </script>
	</body>
</html>